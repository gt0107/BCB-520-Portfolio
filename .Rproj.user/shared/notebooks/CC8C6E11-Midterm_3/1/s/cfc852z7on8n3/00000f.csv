"0","# Read the Excel file"
"0","DOEawardsUI_Dates <- read_xlsx(""DOEawards.xlsx"")"
"2","New names:"
"0","filtered_data_UI_DOE <- DOEawardsUI_Dates %>%"
"0","  filter(Institution == 'Regents of the University of Idaho')"
"0",""
"0","# Assuming the start date column is named ""Start_Date"""
"0","ten_years_ago <- Sys.Date() - years(10)  # "
"0",""
"0","# Filter the data to include only awards that"
"0","filtered_data_UI_10y_DOE <- filtered_data_UI_DOE %>%"
"0","  filter(`Start Date` >= ten_years_ago)"
"0",""
"0","#USDA"
"0",""
"0","# Read the Excel file"
"0","USDAawardsUI_Dates <- read_xlsx(""USDAtoUI_Edited_YR.xlsx"")"
"0",""
"0","filtered_data_UI_USDA <- USDAawardsUI_Dates %>%"
"0","  filter(Institution == 'University of Idaho')"
"0",""
"0","# Assuming the start date column is named ""Start_Date"""
"0","ten_years_ago <- Sys.Date() - years(10)  # "
"0",""
"0","# Filter the data to include only awards that"
"0","filtered_data_UI_10y_USDA <- filtered_data_UI_USDA %>%"
"0","  filter(`Award Date` >= ten_years_ago)"
"0",""
"0","#NIH"
"0",""
"0","# Read the Excel file"
"0","NIHawardsUI_Dates <- read_xlsx(""UI_NIH_ALL_YR.xlsx"")"
"0",""
"0","filtered_data_UI_NIH <- NIHawardsUI_Dates %>%"
"0","  filter(Institution == 'UNIVERSITY OF IDAHO')"
"0",""
"0","# Assuming the start date column is named ""Start_Date"""
"0","ten_years_ago <- Sys.Date() - years(10)  # "
"0",""
"0","# Filter the data to include only awards that"
"0","# Assuming the date format is Month/Day/Year"
"0","filtered_data_UI_10y_NIH <- filtered_data_UI_NIH %>%"
"0","  filter(as.Date(`Project Start Date`, format = ""%m/%d/%Y"") >= ten_years_ago)"
"0",""
"0","#NSF"
"0","# Read the Excel file"
"0","NSFawardsUI_Dates <- read_xlsx(""NSF_ALL_YR.xlsx"")"
"0",""
"0","filtered_data_UI_NSF <- NSFawardsUI_Dates %>%"
"0","  filter(Institution == 'University of Idaho')"
"0",""
"0","# Assuming the start date column is named ""Start_Date"""
"0","ten_years_ago <- Sys.Date() - years(10)  # "
"0",""
"0","# Filter the data to include only awards that"
"0","# Assuming the date format is Month/Day/Year"
"0","filtered_data_UI_10y_NSF <- filtered_data_UI_NSF %>%"
"0","  filter(as.Date(StartDate, format = ""%m/%d/%Y"") >= ten_years_ago)"
"0",""
"0","# Remove dollar signs ($) and commas (,) from numeric columns"
"0","filtered_data_UI_10y_NSF <- filtered_data_UI_10y_NSF %>%"
"0","  mutate(AwardedAmountToDate = as.numeric(gsub(""[\\$,]"", """", AwardedAmountToDate)))"
"0",""
"0",""
"0","# Sum the total amount by start date for each sponsor"
"0","amount_sum_DOE <- filtered_data_UI_10y_DOE %>%"
"0","  group_by(`Start Date`) %>%"
"0","  summarize(Total_Amount = sum(`Amount Awarded to Date`))"
"0",""
"0","amount_sum_USDA <- filtered_data_UI_10y_USDA %>%"
"0","  group_by(`Award Date`) %>%"
"0","  summarize(Total_Amount = sum(`Award Dollars`))"
"0",""
"0","amount_sum_NIH <- filtered_data_UI_10y_NIH %>%"
"0","  group_by(`Project Start Date`) %>%"
"0","  summarize(Total_Amount = sum(`Total Cost`))"
"0",""
"0","amount_sum_NSF <- filtered_data_UI_10y_NSF %>%"
"0","  group_by(StartDate) %>%"
"0","  summarize(Total_Amount = sum(AwardedAmountToDate))"
"0",""
"0","# Add Sponsor column to each data frame"
"0","amount_sum_DOE <- amount_sum_DOE %>% mutate(Sponsor = ""DOE"")"
"0","amount_sum_USDA <- amount_sum_USDA %>% mutate(Sponsor = ""USDA"")"
"0","amount_sum_NIH <- amount_sum_NIH %>% mutate(Sponsor = ""NIH"")"
"0","amount_sum_NSF <- amount_sum_NSF %>% mutate(Sponsor = ""NSF"")"
"0",""
"0","# For DOE dataset"
"0","amount_sum_DOE <- amount_sum_DOE %>%"
"0","  rename(Start_Date = `Start Date`) %>%"
"0","  mutate(Sponsor = ""DOE"")"
"0",""
"0","# For USDA dataset"
"0","amount_sum_USDA <- amount_sum_USDA %>%"
"0","  rename(Start_Date = `Award Date`) %>%"
"0","  mutate(Sponsor = ""USDA"")"
"0",""
"0","# For NIH dataset"
"0","amount_sum_NIH <- amount_sum_NIH  %>%"
"0","  rename(Start_Date = `Project Start Date`) %>%"
"0","  mutate(Sponsor = ""NIH"")"
"0",""
"0","# For NSF dataset"
"0","amount_sum_NSF <- amount_sum_NSF %>%"
"0","  rename(Start_Date = StartDate) %>%"
"0","  mutate(Sponsor = ""NSF"")"
"0",""
"0","# Assuming Start_Date is in character format, convert it to datetime"
"0","amount_sum_DOE <- amount_sum_DOE %>%"
"0","  mutate(Start_Date = as.Date(Start_Date, format = ""%m/%d/%Y""))"
"0",""
"0","amount_sum_USDA <- amount_sum_USDA %>%"
"0","  mutate(Start_Date = as.Date(Start_Date, format = ""%m/%d/%Y""))"
"0",""
"0","amount_sum_NIH <- amount_sum_NIH %>%"
"0","  mutate(Start_Date = as.Date(Start_Date, format = ""%m/%d/%Y""))"
"0",""
"0","amount_sum_NSF <- amount_sum_NSF %>%"
"0","  mutate(Start_Date = as.Date(Start_Date, format = ""%m/%d/%Y""))"
"0",""
"0","# Combine the data frames"
"0","all_amount_sum <- bind_rows("
"0","  amount_sum_DOE %>% mutate(Sponsor = ""DOE""),"
"0","  amount_sum_USDA %>% mutate(Sponsor = ""USDA""),"
"0","  amount_sum_NIH %>% mutate(Sponsor = ""NIH""),"
"0","  amount_sum_NSF %>% mutate(Sponsor = ""NSF"")"
"0",")"
"0",""
"0","# Define colors for each sponsor"
"0","sponsor_colors <- c(""DOE"" = ""darkgray"", ""NSF"" = ""gold"", ""NIH"" = ""black"", ""USDA"" = ""lightgray"")"
"0",""
"0","library(scales)"
"2","
Attaching package: ‘scales’

"
"2","The following object is masked from ‘package:purrr’:

    discard

"
"2","The following object is masked from ‘package:readr’:

    col_factor

"
"0","# Plot the timeline with overlapping lines, adjusted x-axis labels, individual colors, and centralized title"
"0","ggplot(all_amount_sum, aes(x = Start_Date, y = Total_Amount / 1e6, color = Sponsor, group = Sponsor)) +"
"0","  geom_line(size = 1) +"
"0","  labs(title = ""Awards Timeline by Sponsor"","
"0","       x = ""Start Date"","
"0","       y = ""Total Amount (Millions)"") +"
"0","  scale_x_date(date_breaks = ""1 year"", date_labels = ""%Y"", expand = c(0, 0)) +"
"0","  scale_y_continuous(labels = scales::unit_format(unit = ""M"")) +"
"0","  scale_color_manual(values = sponsor_colors) +"
"0","  theme_minimal() +"
"0","  theme("
"0","    plot.title = element_text(hjust = 0.5)"
"0","  )"
