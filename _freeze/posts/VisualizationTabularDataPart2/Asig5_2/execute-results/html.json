{
  "hash": "263fb9464210615c719761d28e6d8231",
  "result": {
    "markdown": "---\ntitle: \"Hockey Analytics\"\nsubtitle: \"Visualizations for Tabular Data\"\nauthor: \"Geraline Trossi-Torres\"\ndate: \"2024-02-29\"\ncategories: [Assignment, DataViz, Visualization]\nimage: \"Profile3.jpg\"\ncode-fold: true\ncode-tools: true\ndescription: \"2024 NHL Draft Picks\"\n---\n\n\n## OVERVIEW\n\nIn this assignment, we are going to practice creating visualizations for tabular data. Unlike previous assignments, however, this time we will all be using the same data sets. I'm doing this because I want everyone to engage in the same logic process and have the same design objectives in mind.\n\n## LEARNING OBJECTIVES\n\n1.  Demonstrate that you can manipulate tabular data to facilitate different visualization tasks. The minimum skills are FILTERING, SELECTING, and SUMMARIZING, all while GROUPING these operations as dictated by your data.\n2.  Demonstrate that you can use tabular data to explore, analyze, and choose the most appropriate visualization idioms given a specific motivating question.\n3.  Demonstrate that you can Find, Access, and Integrate additional data in order to fully address the motivating question.\n\nThe scenario below will allow you to complete the assignment. It deals with data that are of the appropriate complexity and extent (number of observations and variables) to challenge you. If you want to use different data (yours or from another source) I am happy to work with you to make that happen!\n\n## SCENARIO\n\nImagine you are a high priced data science consultant. One of your good friends, Cassandra Canuck, is an Assistant General Manager for the Vancouver Canucks, a team in the National Hockey League with a long, long.... long history of futility.\n\nThis season feels different.\n\nThe Canucks are currently among the league leaders and appear to be on their way to their first playoff appearance in many years. A few weeks ago, the Vancouver Canucks decided to trade an underperforming player with a high upside and their first round draft pick to the Calgary Flames for Elias Lindholm, a very solid forward that might prove to be the missing piece of their Stanley Cup puzzle. Exciting!\n\nExcept that now the Canucks are struggling. They've lost 4 straight games and have seemingly lost their identity as a team. The fans are questioning whether the trade was worth it. Woe is me!\n\nFor the purposes of this exercise, let's set the 2024 NHL draft order using the [Tankathon Simulator](https://www.tankathon.com/nhl). The NHL uses a lottery system in which the teams lowest in the standings have the highest odds of getting the first overall pick. This year the Canucks are at the top of the league, and positioned to have the 31st overall pick. According to the simulator, Calgary will pick at number 2 (which is very valuable!), and the Canuck's pick at 31.\n\nHere is a screenshot:\n\n![](NHLlottery.png)\n\n### Here is the question:\n\nWas the trade worth it? This trade has a high likelihood of becoming what we call a **rental**. Elias Lindholm is on an expiring contract, meaning Vancouver is guaranteed to hold his contract only through the end of the season. They might be able to extend him, but that depends on the salary cap.\n\nMeanwhile, Calgary can draft a player at position 31, who may or may not turn out to be of equal or greater value than Lindholm.\n\nWas the trade worth it? Did Vancouver or Calgary \"win\" the trade?\n\nCan we make some visualizations that help us answer this question?\n\n[Here is an article](https://puckpedia.com/PerriPickValue) on modeling draft pick value!\n\n[Original analysis!](https://www.statsportsconsulting.com/2016/05/26/1658/?platform=hootsuite)\n\n[Eric Tulsky's original paper\\*](https://www.broadstreethockey.com/post/nhl-draft-pick-value-trading-up/)\n\n## DIRECTIONS\n\nCreate a new post in your portfolio for this assignment. Call it something cool, like NHL draft analysis, or Hockey Analytics, or John Wick....\n\nCopy the data files from the repository, and maybe also the .qmd file.\n\nUse the .qmd file as the backbone of your assignment, changing the code and the markdown text as you go.\n\n## THE DATA\n\nHow can we evaluate whether trading a first round pick for a rental player is a good idea? One approach is to look at the historical performance of players from various draft positions.\n\nI've created a data set that will allow us to explore player performance as a function of draft position. If you are curious as to how I obtained and re-arranged these data, you can check out that tutorial [here](../T6-APIsandJSON/index.qmd). For this assignment, though, I want to focus on the visualizations.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nNHLDraft<-read.csv(\"NHLDraft.csv\")\nNHLDictionary<-read_excel(\"NHLDictionary.xlsx\")\n\nknitr::kable(NHLDictionary)\n```\n\n::: {.cell-output-display}\n|Attribute   |Type         |Description                                                                                                           |\n|:-----------|:------------|:---------------------------------------------------------------------------------------------------------------------|\n|draftyear   |Ordinal      |Calendar year in which the player was drafted into the NHL.                                                           |\n|name        |Item         |Full name of the player.                                                                                              |\n|round       |Ordinal      |Round in which the player was drafted (1 to 7).                                                                       |\n|overall     |Ordinal      |Overall draft position of the player (1 to 224)                                                                       |\n|pickinRound |Ordinal      |Position in which the player was drafted in their round (1 to 32).                                                    |\n|height      |Quantitative |Player height in inches.                                                                                              |\n|weight      |Quantitative |Player weight in pounds.                                                                                              |\n|position    |Categorical  |Player position (Forward, Defense, Goaltender)                                                                        |\n|playerId    |Item         |Unique ID (key) assigned to each player.                                                                              |\n|postdraft   |Ordinal      |Number of seasons since being drafted (0 to 20).                                                                      |\n|NHLgames    |Quantitative |Number of games played in the NHL in that particular season (regular season is 82 games, playoffs are up to 28 more). |\n:::\n:::\n\n\nIn this case, we have a dataframe with all the drafted players from 2000-2018, their position, their draft year and position, and then rows for each season since being drafted (`postdraft`). The key variable here is `NHLgames`, which tells us how many games they played in the NHL each season since being drafted. Whether drafted players even make the NHL, and how many games they play, might be a good proxy to understand the value of a draft pick we just traded away.\n\n::: callout-note\n## HINT\n\nIn the GitHub repository there is a file called `NHLdraftstats.csv`. What's in there? Can we use that information?\n:::\n\n## ANALYTICS REGARDING IF THE TRADE WAS WORTH IT\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(dplyr)\nlibrary(ggplot2)\n\nNHLdraftstats <- read.csv(\"NHLdraftstats.csv\")\n\n\nElias_stats <- NHLdraftstats %>%\n  filter(name == \"Elias Lindholm\")\n\nggplot(Elias_stats, aes(x=postdraft, y=NHLgames)) +\n  geom_smooth() +  \n  theme_minimal() +\n  ggtitle(\"Elias Lindholm Performance\") +\n  xlab(\"Post Draft Position\") +  \n  ylab(\"NHL Games Played\") + \n  theme(plot.title = element_text(hjust = 0.5))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`geom_smooth()` using method = 'loess' and formula = 'y ~ x'\n```\n:::\n\n::: {.cell-output-display}\n![](Asig5_2_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n**Labelling.** Can we create a solid figure caption and better axis labels for this figure? In your caption, please specify the task(s) the visualizaiton is intended to facilitate, as well as the marks, channels, and key-value pairs used.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(dplyr)\n\nplayers_stats_2013_2 <- NHLdraftstats %>%\n  filter(draftyear == 2013) %>%\n  filter(name != \"Elias Lindholm\")\n\nggplot(players_stats_2013_2, aes(x=postdraft, y=NHLgames, color=as.factor(round))) +\n  geom_smooth(se=FALSE) +\n  theme_minimal() +\n  ggtitle(\"Overall Players in 2013 by Draft Round\") +\n  xlab(\"Post Draft Position\") +  \n  ylab(\"NHL Games Played\") + \n  theme(plot.title = element_text(hjust = 0.5)) +\n  scale_color_brewer(palette=\"Set1\", name=\"Draft Round\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`geom_smooth()` using method = 'loess' and formula = 'y ~ x'\n```\n:::\n\n::: {.cell-output-display}\n![](Asig5_2_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n**Labelling.** Can we create a solid figure caption and better axis labels for this figure? In your caption, please specify the task(s) the visualizaiton is intended to facilitate, as well as the marks, channels, and key-value pairs used.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplayers_stats_2013 <- NHLdraftstats %>%\n  filter(draftyear == 2013)\n\nlibrary(dplyr)\nlibrary(ggplot2)\n\n# Calculate the average NHL games played by players other than Elias Lindholm\naverage_games <- players_stats_2013 %>%\n  filter(name != \"Elias Lindholm\") %>%\n  summarise(average_NHL_games = mean(NHLgames, na.rm = TRUE))\n\n# Calculate Elias Lindholm's average NHL games\nelias_avg_games <- players_stats_2013 %>%\n  filter(name == \"Elias Lindholm\") %>%\n  summarise(NHLgames = mean(NHLgames, na.rm = TRUE)) %>%\n  mutate(name = \"Elias Lindholm\", category = \"Individual\")\n\n# Create a data frame for the draft average\naverage_df <- data.frame(\n  name = \"2013 Draft Average\",\n  NHLgames = average_games$average_NHL_games,\n  category = \"Average\"\n)\n\n# Ensure both data frames have the same structure and combine them\ncomparison_data <- rbind(elias_avg_games, average_df)\n\n# Create the bar graph comparing Elias Lindholm's NHL games played to the 2013 draft average\nggplot(comparison_data, aes(x = name, y = NHLgames, fill = category)) +\n  geom_col() +\n  theme_minimal() +\n  ggtitle(\"Elias Lindholm vs. 2013 Draft Average NHL Games Played\") +\n  xlab(\"Category\") +\n  ylab(\"NHL Games Played\") +\n  scale_fill_manual(values = c(\"Average\" = \"red\", \"Individual\" = \"blue\")) +\n  theme(plot.title = element_text(hjust = 0.5), axis.text.x = element_blank())\n```\n\n::: {.cell-output-display}\n![](Asig5_2_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n**Labelling.** Can we create a solid figure caption and better axis labels for this figure? In your caption, please specify the task(s) the visualizaiton is intended to facilitate, as well as the marks, channels, and key-value pairs used.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nforwards_2013 <- players_stats_2013 %>%\n  filter(draftyear == 2013, position == \"Forward\") %>%\n  select(name, position, NHLgames) \n\nlibrary(dplyr)\n\n# Mark Elias Lindholm and other players\nplayers_stats_2013 <- players_stats_2013 %>%\n  mutate(Category = ifelse(name == \"Elias Lindholm\", \"Elias Lindholm\", \"Other Players\"))\n\n# Calculate average NHL games for Elias and other players\navg_games_comparison <- players_stats_2013 %>%\n  group_by(Category) %>%\n  summarise(AverageNHLGames = mean(NHLgames, na.rm = TRUE))\n\n# Plot\nggplot(avg_games_comparison, aes(x = Category, y = AverageNHLGames, fill = Category)) +\n  geom_col() +\n  theme_minimal() +\n  ggtitle(\"Average NHL Games: Elias Lindholm vs Other Forwards (2013 Draft)\") +\n  xlab(\"\") +  # Remove x-axis label as Category is self-explanatory\n  ylab(\"Average NHL Games Played\") +\n  scale_fill_manual(values = c(\"Elias Lindholm\" = \"blue\", \"Other Players\" = \"red\"))\n```\n\n::: {.cell-output-display}\n![](Asig5_2_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n**Labelling.** Can we create a solid figure caption and better axis labels for this figure? In your caption, please specify the task(s) the visualizaiton is intended to facilitate, as well as the marks, channels, and key-value pairs used.\n\n\n\n\n\n\n\n1.  Do these visualizations change as a function of player position?\n2.  Is the number of NHL games played really the best metric to use?\nWhat might picks in the range of pick 31 conceivably yield? How often do picks in that range yield players of Elias Lindholm's value?\n\nI guess we'd better figure out what Elias Lindholm brings to the table.\n\nCan you find him in our existing data? Can you think of a way to highlight him in the context of number of games played? What other kinds of data might we need to fairly evaluate Lindholm and pick 31?\n\n## CONCLUSION\n\nBased on your visualizations, what would you advise regarding this trade proposal? Why?\n\n\n\n\n",
    "supporting": [
      "Asig5_2_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}